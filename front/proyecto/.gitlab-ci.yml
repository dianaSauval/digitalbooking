image: node:15

cache:
  paths:
    - front/proyecto/node_modules

stages:
  - test
  - build
  - deploy

test project:
  stage: test
  script:
    - cd front/proyecto
    - npm install
    - npm test

build project:
  stage: build
  script:
    - cd front/proyecto
    - CI=false npm run build
    - echo $CI_PIPELINE_IID > build/version.html
  artifacts:    
    paths:      
      - build



# .npm_build:  
#   image: node:10  
#   script:   
#     - npm install # Install all dependencies    
#     - npm build # yarn build:${APP_ENV} # Build command  
#   artifacts:    
#     paths:      
#       - ./build
#   only:    
#     refs:      
#       - main

# yarn_dev:  
#   extends: .yarn_build  
#   stage: build  
#   before_script:    
#     - export APP_ENV="dev"  
#   only:    
#     refs:      
#       - develop

# yarn_prod:  
#   extends: .yarn_build  
#   stage: build  
#   before_script:    
#     - export APP_ENV="prod"  
#   only:    
#     refs:      
#       - master